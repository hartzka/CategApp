{"version":3,"sources":["components/Notification.js","services/categs.js","services/login.js","services/users.js","components/Menu.js","components/Users.js","components/LoginForm.js","app.js","index.js"],"names":["Notification","message","type","Alert","severity","text","className","newToken","login","credentials","a","axios","post","response","data","get","then","Menu","user","handleLogout","style","padding","color","Navbar","collapseOnSelect","expand","variant","Toggle","aria-controls","Collapse","id","Nav","Link","href","as","to","onSubmit","name","class","Users","users","Table","striped","map","align","categs","length","LoginForm","handleLogin","username","setUsername","password","setPassword","TextField","label","value","onChange","target","App","useState","setMessage","setUser","setUsers","useEffect","userService","loggedUserJSON","window","localStorage","getItem","JSON","parse","categService","token","event","preventDefault","loginService","setItem","stringify","newMessage","setTimeout","clear","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0f96c056.chunk.js","sourcesContent":["import React from 'react'\nimport { Alert } from '@material-ui/lab'\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  } else {\n    if (message.type === 'success') {\n      return (\n        <div>\n          <Alert severity=\"success\">\n            {message.text}\n          </Alert>\n        </div>\n      )\n    } else if (message.type === 'error') {\n      return (\n        <div className=\"message error\">\n          {message.text}\n        </div>\n      )\n    } else {\n      return null\n    }\n  }\n}\n\nexport default Notification","import axios from 'axios'\nconst baseUrl = '/api/categ'\n\nlet token = null\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, setToken }","import axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async credentials => {\n  const response = await axios.post(baseUrl, credentials)\n  return response.data\n}\n\nexport default { login }","import axios from 'axios'\nconst baseUrl = '/api/users'\n\nlet token = null\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = async newObject => {\n  const config = {\n    headers: { Authorization: token },\n  }\n  const response = await axios.post(baseUrl, newObject, config)\n  return response.data\n}\n\nexport default { getAll, create, setToken }","import { Navbar, Nav } from 'react-bootstrap'\nimport { Link } from 'react-router-dom'\nimport React from 'react'\n\nconst Menu = ({ user, handleLogout }) => {\n  const style = {\n    padding: '5px',\n    color: 'white'\n  }\n  return (\n    <Navbar collapseOnSelect expand=\"lg\" variant=\"light\">\n      <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\n      <Navbar.Collapse id=\"responsive-navbar-nav\">\n        <Nav className=\"mr-auto\">\n          <Nav.Link href=\"#\" as=\"span\">\n            <Link style={style} to=\"/\">categories</Link>\n          </Nav.Link>\n          <Nav.Link href=\"#\" as=\"span\">\n            <Link style={style} to=\"/users\">users</Link>\n          </Nav.Link>\n          <Nav.Link href=\"#\" as=\"span\">\n            {user !== null &&\n            <form onSubmit={handleLogout}>\n              <p>{user.name} logged in\n                <button class=\"btn btn-danger\" type=\"submit\">logout</button>\n              </p>\n            </form>\n            }\n          </Nav.Link>\n        </Nav>\n      </Navbar.Collapse>\n    </Navbar>\n  )\n}\n\nexport default Menu","import { Table } from 'react-bootstrap'\nimport { Link } from 'react-router-dom'\nimport React from 'react'\n\nconst Users = ({ users }) => {\n  return (\n    <div>\n      <h2>Users</h2>\n      <Table striped>\n        <tbody>\n          <tr>\n            <th></th>\n            <th>Category items created</th>\n          </tr>\n          {users.map(user =>\n            <tr align=\"left\">\n              <th>{user.name}</th>\n              <th>{user.categs.length}</th>\n            </tr>\n          )}\n        </tbody>\n      </Table>\n    </div>\n  )\n}\n\nexport default Users","import React from 'react'\nimport { TextField } from '@material-ui/core'\n\nconst LoginForm = ({\n  handleLogin,\n  username,\n  setUsername,\n  password,\n  setPassword\n}) => (\n  <div>\n    <h2>Log in to application</h2>\n    <form onSubmit={handleLogin}>\n      <div>\n        <TextField label=\"username\"\n          id=\"username\"\n          type=\"text\"\n          value={username}\n          name=\"Username\"\n          onChange={({ target }) => setUsername(target.value)}\n        />\n      </div>\n      <div>\n        <TextField label=\"password\"\n          id=\"password\"\n          type=\"password\"\n          value={password}\n          name=\"Password\"\n          onChange={({ target }) => setPassword(target.value)}\n        />\n      </div>\n      <button type=\"submit\" class=\"btn btn-success\" id=\"login-button\">login</button>\n    </form>\n  </div>\n)\n\nexport default LoginForm","import React, { useState, useEffect } from 'react'\nimport Notification from './components/Notification'\nimport categService from './services/categs'\nimport loginService from './services/login'\nimport userService from './services/users'\nimport Menu from './components/Menu'\nimport Users from './components/Users'\nimport {\n  BrowserRouter as Router,\n  Switch, Route\n} from 'react-router-dom'\nimport LoginForm from './components/LoginForm'\n\nconst App = () => {\n  const [message, setMessage] = useState(null)\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [user, setUser] = useState(null)\n  const [users, setUsers] = useState([])\n\n  useEffect(() => {\n    userService.getAll().then(users => {\n      setUsers(users)\n    })\n  }, [])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      categService.setToken(user.token)\n    }\n  }, [])\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n    try {\n      const user = await loginService.login({\n        username, password\n      })\n      window.localStorage.setItem(\n        'loggedUser', JSON.stringify(user)\n      )\n      categService.setToken(user.token)\n      setUser(user)\n      setUsername('')\n      setPassword('')\n      const newMessage = {\n        type: 'success',\n        text: `Welcome, ${username}`\n      }\n      setMessage(newMessage)\n      setTimeout(() => { setMessage(null) }, 4000)\n    } catch (exception) {\n      const newMessage = {\n        type: 'error',\n        text: 'Wrong credentials'\n      }\n      setMessage(newMessage)\n      setTimeout(() => { setMessage(null) }, 4000)\n    }\n  }\n\n  const handleLogout = async (event) => {\n    event.preventDefault()\n    window.localStorage.clear()\n    setUser(null)\n    categService.setToken('')\n  }\n\n  const loginForm = () => (\n    <LoginForm\n      handleLogin={handleLogin}\n      username={username}\n      setUsername={setUsername}\n      password={password}\n      setPassword={setPassword}\n    />\n  )\n\n  return (\n    <div>\n      <Router>\n        <Menu user={user} handleLogout={handleLogout} />\n        <Notification message={message} />\n        <Switch>\n          <Route path=\"/users\">\n            <Users users={users}/>\n          </Route>\n          <Route path=\"/\">\n            {user === null ?\n              loginForm() :\n              <div>\n                <p>Welcome!</p>\n              </div>\n            }\n          </Route>\n        </Switch>\n      </Router>\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './app'\nimport './app.css'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}