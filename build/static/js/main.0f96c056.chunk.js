(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{111:function(e,t,a){},112:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(8),c=a.n(l),s=a(18),u=a.n(s),o=a(28),i=a(35),m=a(148),p=function(e){var t=e.message;return null===t?null:"success"===t.type?r.a.createElement("div",null,r.a.createElement(m.a,{severity:"success"},t.text)):"error"===t.type?r.a.createElement("div",{className:"message error"},t.text):null},f=a(30),d=a.n(f),E=function(e){"bearer ".concat(e)},g={login:function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(){return d.a.get("/api/users").then((function(e){return e.data}))},b=a(149),h=a(150),w=a(31),y=function(e){var t=e.user,a=e.handleLogout,n={padding:"5px",color:"white"};return r.a.createElement(b.a,{collapseOnSelect:!0,expand:"lg",variant:"light"},r.a.createElement(b.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(b.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(h.a,{className:"mr-auto"},r.a.createElement(h.a.Link,{href:"#",as:"span"},r.a.createElement(w.b,{style:n,to:"/"},"categories")),r.a.createElement(h.a.Link,{href:"#",as:"span"},r.a.createElement(w.b,{style:n,to:"/users"},"users")),r.a.createElement(h.a.Link,{href:"#",as:"span"},null!==t&&r.a.createElement("form",{onSubmit:a},r.a.createElement("p",null,t.name," logged in",r.a.createElement("button",{class:"btn btn-danger",type:"submit"},"logout")))))))},O=a(146),j=function(e){var t=e.users;return r.a.createElement("div",null,r.a.createElement("h2",null,"Users"),r.a.createElement(O.a,{striped:!0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Category items created")),t.map((function(e){return r.a.createElement("tr",{align:"left"},r.a.createElement("th",null,e.name),r.a.createElement("th",null,e.categs.length))})))))},x=a(11),S=a(147),k=function(e){var t=e.handleLogin,a=e.username,n=e.setUsername,l=e.password,c=e.setPassword;return r.a.createElement("div",null,r.a.createElement("h2",null,"Log in to application"),r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement(S.a,{label:"username",id:"username",type:"text",value:a,name:"Username",onChange:function(e){var t=e.target;return n(t.value)}})),r.a.createElement("div",null,r.a.createElement(S.a,{label:"password",id:"password",type:"password",value:l,name:"Password",onChange:function(e){var t=e.target;return c(t.value)}})),r.a.createElement("button",{type:"submit",class:"btn btn-success",id:"login-button"},"login")))},L=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),s=Object(i.a)(c,2),m=s[0],f=s[1],d=Object(n.useState)(""),b=Object(i.a)(d,2),h=b[0],O=b[1],S=Object(n.useState)(null),L=Object(i.a)(S,2),U=L[0],C=L[1],J=Object(n.useState)([]),N=Object(i.a)(J,2),I=N[0],P=N[1];Object(n.useEffect)((function(){v().then((function(e){P(e)}))}),[]),Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);C(t),E(t.token)}}),[]);var T=function(){var e=Object(o.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,g.login({username:m,password:h});case 4:a=e.sent,window.localStorage.setItem("loggedUser",JSON.stringify(a)),E(a.token),C(a),f(""),O(""),n={type:"success",text:"Welcome, ".concat(m)},l(n),setTimeout((function(){l(null)}),4e3),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(1),l({type:"error",text:"Wrong credentials"}),setTimeout((function(){l(null)}),4e3);case 20:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),window.localStorage.clear(),C(null),E("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(w.a,null,r.a.createElement(y,{user:U,handleLogout:W}),r.a.createElement(p,{message:a}),r.a.createElement(x.c,null,r.a.createElement(x.a,{path:"/users"},r.a.createElement(j,{users:I})),r.a.createElement(x.a,{path:"/"},null===U?r.a.createElement(k,{handleLogin:T,username:m,setUsername:f,password:h,setPassword:O}):r.a.createElement("div",null,r.a.createElement("p",null,"Welcome!"))))))};a(111);c.a.render(r.a.createElement(L,null),document.getElementById("root"))},80:function(e,t,a){e.exports=a(112)}},[[80,1,2]]]);
//# sourceMappingURL=main.0f96c056.chunk.js.map